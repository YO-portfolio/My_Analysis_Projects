---
title: "イギリス・ブリストル市におけるAirbnbの宿泊価格に関する分析"
author: "Yoshiki Okada"
date: "2025-08-04"
output: html_document
---

```{r setup, include=FALSE}
library("tidyverse")  
library("conflicted")
library("skimr")
conflict_prefer("filter", "dplyr")
conflict_prefer("lag", "dplyr")
knitr::opts_chunk$set(echo = TRUE)
```

## **はじめに**


本レポートは、Airbnbの公式プラットフォームから公開されているデータセット「listings.csv.gz」を用い、イギリス・ブリストル市におけるAirbnb物件の価格動向を分析したものです。データは3月時点の個別物件に関する詳細情報を含み、四半期ごとに更新されています。

分析の焦点は、Airbnbでの宿泊料金（price）に影響を与えると考えられる4つの主要要因、すなわち物件の所在地（neighbourhood_cleansed）、部屋の種類（room_type）、レビュー件数（number_of_reviews）、およびレビュースコア（review_scores_rating）です。

本プロジェクトは、実務で求められる基礎的なデータ分析および可視化スキルの習得と実践を目的としております。 <br><br>

## **データの出典**

本分析で使用したデータは、世界の主要都市におけるAirbnb物件情報を提供するウェブサイト「Inside Airbnb」にて公開されているものです。

対象としたのは、2025年3月時点のブリストル市の物件リスト（Bristol listings dataset）で、以下のリンクからダウンロード可能です。
[ダウンロードリンク](https://insideairbnb.com/get-the-data/)

本データセットは、「クリエイティブ・コモンズ 表示 4.0 国際ライセンス（CC BY 4.0）」のもとで提供されています。ライセンスの詳細については以下をご参照ください。
[ライセンス詳細リンク](https://creativecommons.org/licenses/by/4.0/)

引用の際は、以下の形式をご利用ください。

- “Get the Data.” Inside Airbnb, <https://insideairbnb.com/get-the-data/>. 2025年7月28日アクセス。

 <br><br>

## **データの概要**

本分析で使用した「listings.csv.gz」データセットには、ブリストル市内の2,772件の物件に関する詳細情報が含まれています。
本分析で用いた変数は以下の通りです：

- neighbourhood_cleansed：物件の所在地を示す変数

- room_type：提供される部屋の種類（例：一軒家・アパート全体、ホテルの客室、個室など）

- price：宿泊料金（現地通貨）

- number_of_reviews：物件が受けたレビューの総数

- review_scores_rating：宿泊客による平均レビュースコア

その他の変数に関しては、本分析では使用しないため割愛いたします。

<br><br>

## **データの整形と前処理**

本データセットには多数の変数が含まれており、多くは本分析の目的にそぐわないため除外しました。変数の全体像を把握するために、skim()関数を用いて初期調査を行いました。

分析の主要変数の一つである「price」は文字列として保存されていたため、ドル記号を除去し、数値型に変換して分析準備を行いました。

重要変数（例：「price」「review_scores_rating」）の欠損値（NA）は、補完が困難なため本分析から除外しました。特に「price」の欠損を重視し、これを基準に除外を進めました。

除外の過程で、「price」の欠損値が物件所在地（neighbourhood_cleansed）によって偏っていることが判明しました。Airbnb上の地域ごとの物件数の違いもあり、この偏りを完全に解消することは困難と判断しました。そこで、物件数が全体の下位25パーセンタイル（32件）未満の地域は「Other」にまとめました。

また、「review_scores_rating」も地域ごとに欠損の偏りがありました。価格欠損物件の除外により、レビュースコアの欠損率および地域偏りの増加が見受けられました。そのため、地域バイアス軽減の観点から、価格欠損物件とともにレビュースコアの欠損物件も除外しました。

```{r ファイルの読み込み}
airbnb_df <- read.csv("listings.csv")
```

```{r 変数の除外}
airbnb_rm <- airbnb_df %>%
  select(neighbourhood_cleansed, latitude, longitude, room_type, number_of_reviews, review_scores_rating, price)
```

```{r 変数のクラス型の変更：文字型ー＞数値型, warning=FALSE}
airbnb_rm_dollar <- airbnb_rm %>%
  mutate(price_num = gsub("\\$", "",price))

airbnb_rm_dollar$price_num <- as.numeric(airbnb_rm_dollar$price_num) 
```

```{r 地域のグループ化}
grouped_airbnb <- airbnb_rm_dollar %>%
  group_by(neighbourhood_cleansed) %>%
  summarise(room_num = n(), .groups = "drop") %>%  
  mutate(location_group = ifelse(room_num <= 32, "Other", as.character(neighbourhood_cleansed)))

grouped_airbnb_rm <- airbnb_rm_dollar %>%
  left_join(grouped_airbnb %>%
              select(neighbourhood_cleansed, location_group), by = "neighbourhood_cleansed")
```

```{r 欠損の除外}
airbnb_cleaned_save <- grouped_airbnb_rm %>%
  na.omit()
```

```{r 最終}
##分析用に追加で不要データを除外したデータセットを作成しました。元データはバックアップとして保存しています。

airbnb_use <- airbnb_cleaned_save %>%
  select(-c(neighbourhood_cleansed, price, latitude, longitude))
```

<br><br>

## **分析手法**

本分析では、価格に影響を与えると考えられる主要変数である「地域」「部屋の種類」「レビュー数」「レビュースコア」について、グラフによる可視化および回帰分析を行いました。
<br><br>

### **変数の選択理由:**

**地域（location）:** 土地の価値や周辺環境といった要素が価格設定に反映されると考えたためです。

**部屋の種類（Room Type）:** 部屋の広さや最大収容人数などが価格に影響すると仮定しました。プライバシーの度合いも関連すると推測されますが、「Entire home/apt（一棟貸し・アパートメント）」「Hotel room（ホテルの客室）」「Private room（個室）」という現行の分類では、プライバシーの違いを正確に評価するには情報が不足するため今回は見送りました。

**レビュー数とレビュースコア:** 宿泊客がレビュースコアだけでなく、レビュー件数も信頼性の指標として考慮する可能性があると想定しました。そのため、レビュー数が少ない場合はスコアの信頼度が下がり、多い場合は信用性が高いと判断されることが、価格に影響すると考えました。
<br><br>

### **手法及びその選択理由:**

- **地域・部屋タイプの分析:**
平均価格を用いた棒グラフによる可視化と単回帰分析を行いました。
外れ値は平均価格の2倍を目安に確認しましたが、特定カテゴリに偏って分布していたため、単純に除外するのは適切でないと判断しました。そのため、箱ひげ図ではなく平均値の棒グラフで分布の傾向を示すことで、読みやすさと実態の把握を重視しました。

- **地域別価格回帰分析:**
地域に含まれる定性的要素（アクセスの良さ、人気度など）は数値化が難しいため、地域ごとの価格傾向をざっくり捉える目的で単回帰分析を実施しました。

- **部屋タイプ別価格回帰分析:**
地域ごとに分けると複雑になるため、全体の平均値を用いた単回帰分析を行いました。

- **レビュー数・レビュースコアの分析:**
レビュー数とレビュースコアは宿泊客の意思決定において相互に影響し合うと考えられるため、単回帰ではなく重回帰分析を用いました。
また、これらの関係性や傾向を視覚的に確認するため、ヒートマップも作成しました。
<br><br>

### **モデルの概要:**

これらの分析は、価格と選択変数間の概略的な関係性を探ることを目的としており、予測モデルの構築は含んでいません。
<br><br>

## **結果とコード**

本セクションでは、前述の分析手法に基づいて実行したコードおよび可視化結果を示します。
各出力に対して、その都度結果と考察を記載しています。

※回帰分析の詳細な出力（回帰係数など）は、可視性や一貫性の観点から本セクションでは省略しています。主要な示唆は各考察内に要約しています。

<br><br>

### **地域別の宿泊価格の傾向**

#### **データの集計:**

各地域ごとの平均価格を算出し、全体の平均価格とともに棒グラフで可視化しました。

```{r location vs price}
lvp_airbnb <- airbnb_use %>%
  group_by(location_group) %>%
  summarise(ave_price = mean(price_num, na.rm = TRUE))

total_ave_price = mean(lvp_airbnb$ave_price, na.rm = TRUE)
```

#### **可視化: グラフ**

```{r graph of lvp}
lvp_airbnb$color_group <- ifelse(lvp_airbnb$ave_price > total_ave_price, "高い", "低い")

ggplot() +
  geom_col(data = lvp_airbnb, aes(x = factor(location_group), y = ave_price, fill = color_group)) +
  geom_text(data = lvp_airbnb, aes(x = factor(location_group), y = ave_price/2, label = paste0(round(ave_price, 1))),
            color = "black", size = 3) + 
  geom_hline(yintercept = total_ave_price, linetype = "dashed", color = "green3") + 
  annotate("text", x = Inf, y = total_ave_price, label = paste0("全体平均 ", round((total_ave_price), 1)), hjust = 0.5, vjust = 1, color = "black", size = 3) + 
  coord_flip() +
  scale_y_continuous(labels = scales::comma,
                     breaks = seq(0, 200, by = 50),
                     limits = c(0, 170)) +
  scale_fill_manual(values = c("高い" = "tomato", "低い" = "skyblue"), name = "全体平均との比較") +
  labs(title = "地域別の平均宿泊価格（全体平均との比較）",
       x = "地域",
       y = "平均宿泊価格 (イギリス・ポンド)",
       ) +
  theme_minimal()
```

#### **注釈:**

- 「Other」には、掲載件数が32件未満の地域が含まれます。

- 価格はすべてGBP（イギリス・ポンド）で表示しています。元データでは通貨記号としてドル記号（$）が付与されていましたが、これは実際の通貨を示すものではなく、対象地域が英国であることからGBPとして統一しています。

- これらの説明は可読性のため本グラフに記載していますが、以降の可視化では省略します。
<br><br>

#### **簡単な考察:**

- 全26地域（「Other」を含む）のうち、12地域で平均価格が全体平均を上回りました。

- 中でも Hotwells & Harbourside は、平均の約1.6倍と最も高い水準を示しました。

- この価格傾向は、同地域が複数の主要観光地へのアクセスに優れている立地であることが一因と考えられます。
<br><br>

#### **線形回帰分析:**

```{r linear regression for lvp}
model_lvp <- lm(price_num ~factor(location_group), data = airbnb_use)
```

地域（location）を説明変数とした回帰分析では、決定係数（R²）は約4％と非常に低く、価格差を地域だけで説明するのは困難であることが示されました。
<br><br>

#### **総合的な分析と考察:**

可視化による傾向と統計的な関連性の弱さのギャップは、地域の評判や治安、周辺の宿泊施設の密度、その他モデルに含まれていない定量化が難しい地域特有の要因によるものと考えられます。
<br><br>

### **部屋タイプ別宿泊価格の傾向**

#### **データの集計:**

各施設形態ごとの平均価格を算出し、棒グラフで可視化しました。

```{r room type vs price}
rvp_airbnb <- airbnb_use %>%
  group_by(room_type) %>%
  summarise(ave_price = mean(price_num, na.rm = TRUE))
```

#### **可視化: グラフ**

```{r graph of rvp, fig.width= 8}
ggplot(data = rvp_airbnb, aes(x = factor(room_type), y = ave_price)) + 
  geom_col(fill = "steelblue") + 
  geom_text(data = rvp_airbnb, aes(x = factor(room_type), y = ave_price/2, label = paste0(round(ave_price, 1))), color = "black", size = 3) + 
  scale_y_continuous(labels = scales::comma,
                     breaks = seq(0, 150, by = 25),
                     limits = c(0, 140)) + 
  labs(title = "部屋の種類ごとの平均宿泊価格",
       x = "部屋の種類",
       y = "平均宿泊価格 (イギリス・ポンド)") + 
  theme_minimal()
```

#### **簡単な考察:**

- 「Entire home/apt（一棟貸し・アパートメント）」は平均126.7ポンドで、広さや収容人数の多さが反映されています。

- 「Hotel room（ホテルの客室）」は平均79.8ポンドで、「Private room（個室）」の49.9ポンドに比べ約1.6倍高く、安定したサービスや設備が価格に影響していると考えられます。 
<br><br>

#### **線形回帰分析:**

```{r linear regression for rvp}
model_rvp <- lm(price_num ~factor(room_type), data = airbnb_use)
```

部屋の種類を説明変数とした回帰分析では、決定係数（R²）は約17.5％と限定的であり、部屋の種類だけでは価格差を十分に説明できないことが示されました。 
<br><br>

#### **総合的な分析と考察:**

可視化による傾向と統計的な関連性の弱さの乖離は、物件の状態や設備、ホストの価格設定戦略など、定量化が困難な要因によるものと考えられます。これらの要因が価格に大きく影響しているため、単純なモデルでは可視化された複雑な傾向を捉えきれない状況が生じています。

部屋の種類や地域を説明変数とした単一変数回帰の説明力が低いこと、そして多くの定量化困難な要素が存在することから、これらの変数を含めた多変量回帰分析は行わず、レビュー数とレビュースコアに着目した重回帰分析に進めることとしました。 <br><br>

### **レビュー数・レビュースコア別の宿泊価格の傾向**

#### **データの集計:**

レビュー数とレビュースコアをそれぞれ4分位に分類し、各組み合わせごとの平均宿泊価格を算出しました。

```{r review number and score vs price}
rnsvp_airbnb_use <- airbnb_use %>%
  mutate(review_num_group = cut(number_of_reviews,
                                breaks = quantile(number_of_reviews, probs = seq(0, 1, 0.25), na.rm = TRUE),
                                include.lowest = TRUE,
                                labels = c("ごく少数", "少ない", "中程度", "多い")),
         review_score_group = cut(review_scores_rating,
                                  breaks = quantile(review_scores_rating, probs = seq(0, 1, 0.25), na.rm = TRUE),
                                  include.lowest = TRUE,
                                  labels = c("低い", "やや低い", "良い", "高い")))

tile_rnsvp <- rnsvp_airbnb_use %>%
  group_by(review_num_group, review_score_group) %>%
  summarise(ave_price = mean(price_num, na.rm = TRUE), .groups = "drop")
```

#### **可視化: グラフ**

```{r graph of rnsvp, fig.width= 9}
ggplot(data = tile_rnsvp, aes(x = review_score_group, y = review_num_group, fill = ave_price)) + 
  geom_tile(color = "white") + 
  scale_fill_gradient(low = "lightblue", high = "blue4", name = "平均宿泊価格 (イギリス・ポンド)") + 
  labs(
    title = "レビュー数×レビュースコアにおける平均宿泊価格",
    x = "レビュースコア",
    y = "レビュー数",
    ) +
  theme_minimal()
```

#### **注釈:**

- 「レビュー数」のグループは、「ごく少数」「少ない」「中程度」「多い」の4区分に分類しています。

- 「レビュースコア」のグループは、「低い」「やや低い」「良い」「高い」の4区分に分類しています。

- いずれも、それぞれの分布を4分位（25％刻み）で区切ることで分類を行っています。これは、データの偏りを軽減し、比較しやすい形で分析を行うための処理です。
<br><br>

#### **簡単な考察:**

- 平均宿泊価格が高い傾向にあったのは、以下のような条件の組み合わせにおいてです。

  - レビュースコアが「やや低い」かつ、レビュー数が「ごく少数」または「少ない」
  
  - レビュースコアが「高い」かつ、レビュー数が「ごく少数」
<br>
- 一方で、平均宿泊価格が低い傾向にあったのは、次のような組み合わせでした。

  - レビュースコアが「やや低い」かつ、レビュー数が「中程度」または「多い」
  
  - レビュースコアが「高い」かつ、レビュー数が「中程度」
<br>
- これらの傾向から、レビュー数およびレビュースコアが宿泊価格に一定の影響を及ぼしている可能性は考えられますが、明確かつ一貫した関係性があるとは言い切れない結果となりました。
<br><br>

#### **多重回帰分析:**

```{r multiple regression for rnsvp}
model_rnsvp <- lm(price_num ~ factor(review_score_group) + factor(review_num_group), data = rnsvp_airbnb_use)
```

レビュー数およびレビュースコアを説明変数とした回帰分析では、決定係数（R²）は約1.3%と非常に低く、これらの変数のみでは宿泊価格の違いを十分に説明できないことが示されました。 
<br><br>

#### **総合的な分析と考察:**

これまでの分析結果を踏まえると、レビュー数およびレビュースコアは、当初の想定に反して、宿泊価格を決定づける上で有意な要因とは言えないことが明らかとなりました。これらの変数は、ホストの収益や予約率、あるいは予約件数といった他の指標には一定の影響を与えている可能性はあるものの、本分析の目的である価格傾向の把握においては、意味のある説明変数とはなりませんでした。
<br><br>

## **結論**

### **分析結果の要約と考察:**

本分析では、Airbnb物件の宿泊価格に影響を与えると考えられる要因として、「地域」「部屋の種類」「レビュー数」「レビュースコア」の4つを中心に検討を行いました。

可視化においては、地域および部屋の種類ごとに明確な価格傾向が確認されました。たとえば、Hotwells & Harboursideのような地域では平均宿泊価格が全体と比べて著しく高く、また、Entire home/apartment（一棟貸し・アパートメント）タイプの物件は他のタイプよりも高価格帯に位置していました。

一方で、線形回帰分析における説明力は限定的であり、地域（決定係数：約4%）、部屋の種類（約17.5%）、レビューに関する指標（約1.3%）のいずれにおいても、価格の違いを十分に説明するには至りませんでした。ただし、一部の地域で観察された視覚的な傾向は、立地条件や需要の高さといった実務的な要素と関連している可能性があり、ホストが価格戦略を考える上での参考にはなり得ます。

このように、視覚的傾向と統計モデルとの間に乖離が見られた背景には、地域の評判やホストの戦略、物件の状態など、モデルに含まれていない定量化困難な要因の存在が大きいと考えられます。

また、地域や部屋の種類が単独では十分な説明変数となり得なかったことから、多変量回帰はレビュー関連の変数に限定して実施しました。しかしながら、その結果も説明力が低く、Airbnbにおける価格設定には、本データセットでは捉えきれない複雑な要因が絡んでいることが改めて示されました。
<br><br>

### **実務への示唆:**

視覚的に明らかな傾向が見られる場合でも、それが統計的に裏付けられるとは限りません。地域や部屋の種類に応じた価格差はグラフ上では明確であっても、回帰分析の結果からは、その印象が必ずしも定量的に裏付けられない可能性があることが示されました。

Airbnbの価格設定は、物件の外観、ホストによるサービスの個別性、季節的要因など、主観的かつ計測が困難な要素によって左右されていると考えられます。ホストやプラットフォームの分析担当者を含む関係者にとっては、データに基づく分析に加え、定性的な要素も踏まえた価格判断の重要性が示唆されます。

さらに、個人間取引プラットフォームにおける価格設定を効果的にモデル化するには、動的かつ個別的な変数を取り込む必要があるのではないかという、より本質的な問いも浮かび上がります。従来の回帰モデルでは、そのような柔軟性を十分に捉えきれない可能性があるため、今後の分析では時間依存のデータやホストプロフィール、レビューのテキスト分析といった情報を活用することで、説明力を高められる余地があると考えられます。
<br><br>

### **本分析における制約:**

本データセットには、寝室数や設備といった変数も含まれていましたが、観光地への近接性や地域特性、ホストの提供するサービスなど、重要と考えられる多くの要素については、定量化の困難さや主観的評価の偏りを避けるために除外しました。

また、予約時期や掲載期間といった時間的な要素も分析には含めておらず、短期的な価格変動や季節性を十分に捉えられていない可能性があります。

部屋タイプやレビュー評価などのカテゴリ区分においても、詳細な違いが一括りに扱われてしまうことで、グループ内のばらつきが見えにくくなった可能性があります。さらに、外れ値への対応についても制限があり、視覚的にフィルタリングされたとはいえ、価格が極端に高い一部の物件が全体の傾向に影響を及ぼしている可能性は否定できません。
<br><br>

### **今後の展望:**

今後の分析では、以下のような視点を取り入れることで、より実態に即した洞察の獲得が期待されます。

- 設備情報、正確な位置情報、物件の広さ、写真といった要素を自然言語処理（NLP）や画像認識などの技術を用いて定量化し、特徴量として活用すること。

- 時系列分析やパネルデータを用いて、期間ごとの価格変動やリストの再掲載による変化を把握すること。

- 複数の変数に基づいたクラスタリングを行い、自然な分類群を抽出したうえで、それぞれの価格帯や特徴との関連性を検討すること。

- ホストの経験やゲスト満足度といった定性的要因についても、レビュー内容のセンチメント分析等を通じて補完的な知見を得ること。
<br><br>